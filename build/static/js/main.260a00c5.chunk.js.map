{"version":3,"sources":["components/search.js","components/form.js","components/showpeople.js","services/persons.js","App.js","index.js"],"names":["Search","props","value","onChange","Form","onSubmit","name_value","name_onChange","number_value","number_onChange","type","ShowPeople","searchWord","persons","searchPersons","map","person","name","number","onClick","onButtonClick","baseUrl","axios","get","then","response","data","newObject","post","id","delete","newPerson","put","Notification","message","style","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","ErrorMessage","App","useState","setPersons","setNewPerson","setSearchPersons","setNewSearchWord","notifyMessage","setNotifyMessage","errorMessage","setErrorMessage","useEffect","console","log","personService","people","event","search","target","filter","toLowerCase","includes","preventDefault","find","updatedPerson","window","confirm","up","p","setTimeout","catch","error","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.260a00c5.chunk.js","sourcesContent":["import React from 'react'\n\nconst Search = (props) => {\n    return(\n        <div>\n            filter shown with <input value={props.value} onChange={props.onChange}/>\n        </div>\n    )\n}\n\n\nexport default Search","import React from 'react'\n\nconst Form = (props) => {\n    return(\n        <form onSubmit={props.onSubmit}>\n                <div>\n                    name: <input value={props.name_value} onChange={props.name_onChange}/>\n                </div>\n                <div>\n                    number: <input value={props.number_value} onChange={props.number_onChange}/>\n                </div>\n                <div>\n                    <button type=\"submit\">add</button>\n                </div>\n        </form>\n    )\n}\n\n\nexport default Form","import React from 'react'\n\nconst ShowPeople = (props) => {\n    \n    let searchWord = props.searchWord\n    let persons = props.persons\n    let searchPersons = props.searchPersons\n\n    return(\n        <ul>\n            {searchWord === '' ? \n                persons.map((person)=> {\n                    return(\n                        <div key={person.name}>\n                            <li key={person.name}>{person.name} {person.number}</li>\n                            <button onClick={() => {props.onButtonClick(person)}}>delete</button>\n                        </div> \n                    )\n                })\n                :\n                searchPersons.map((person)=> {\n                    return(\n                        <div key={person.name}>\n                            <li key={person.name}>{person.name} {person.number}</li>\n                            <button onClick={() => {props.onButtonClick(person)}}>delete</button>\n                        </div>\n                    )\n                })\n            }\n        </ul>\n    )\n}\n\nexport default ShowPeople\n","import axios from 'axios'\nconst baseUrl = 'http://localhost:3001/api/persons'\n//const baseUrl = 'https://nameless-caverns-99982.herokuapp.com/api/persons'\n\n\nconst getAll = () => {\n    return axios.get(baseUrl).then(response => response.data)\n}\n\nconst create = (newObject) => {\n    return axios.post(baseUrl, newObject).then(response => response.data)\n}\n\nconst deletePerson = (id) => {\n    return axios.delete(`${baseUrl}/${id}`).then(response => response.data)\n}\n\nconst updateNumber = (newPerson) => {\n    return axios.put(`${baseUrl}/${newPerson.id}`, newPerson).then(response => response.data)\n}\n\n\nexport default{ getAll, create, deletePerson, updateNumber }","import React, {useState, useEffect} from 'react'\nimport Search from './components/search'\nimport Form from './components/form'\nimport ShowPeople from './components/showpeople'\nimport personService from './services/persons'\n\nconst Notification = ({message}) => {\n    if(message === null){\n      return null\n    }\n    \n    const messageStyle = {\n        color: 'green',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    }\n\n    return (\n      <div style={messageStyle}>\n        {message}\n      </div>\n    )\n}\n\nconst ErrorMessage = ({message}) => {\n    if(message === null){\n      return null\n    }\n    \n    const messageStyle = {\n        color: 'red',\n        background: 'lightgrey',\n        fontSize: 20,\n        borderStyle: 'solid',\n        borderRadius: 5,\n        padding: 10,\n        marginBottom: 10,\n    }\n\n    return (\n      <div style={messageStyle}>\n        {message}\n      </div>\n    )\n}\n\n\nconst App = () => {\n    const [persons, setPersons] = useState([])\n    const [newPerson, setNewPerson] = useState({\n        name: '', number: ''\n    })\n    const [searchPersons, setSearchPersons] = useState([])\n    const [searchWord, setNewSearchWord] = useState('')\n    const [notifyMessage, setNotifyMessage] = useState(null)\n    const [errorMessage, setErrorMessage] = useState(null)\n\n    \n    //fetch data at the beginning \n    useEffect(()=>{\n        console.log('fetching data...');\n        personService.getAll()\n                     .then(people => {\n                         setPersons(people)\n                     })\n    }, []);\n\n    \n    const addPerson = (event) => {\n        event.preventDefault()\n        console.log('submitted');\n\n        if(persons.find(person => person['name'] === newPerson['name'])){ // check if person exist already\n            //window.alert(`${newPerson['name']} is already added to phonebook`) // template string with backticks `` (upper left on keyboard)\n            const updatedPerson = {\n                ...newPerson,\n                id: persons.find(person => person['name'] === newPerson['name']).id\n            }\n\n            if(window.confirm(`${updatedPerson.name} is already added to phonebook, replace the old number with a  new one?`)){\n                personService.updateNumber(updatedPerson)\n                             .then(up => {\n                                console.log(up);\n                                setPersons(persons.map(p => p.id !== up.id ? p : up))\n                                setNotifyMessage(`Updated ${updatedPerson.name}'s phone number`)\n                                setTimeout(() => {\n                                    setNotifyMessage(null)\n                                }, 5000)\n                             })\n                             .catch(error => {\n                                setErrorMessage(`Information of ${updatedPerson.name} has already been removed from server`)\n                                setTimeout(() => {\n                                    setErrorMessage(null)\n                                }, 5000)\n                                setPersons(persons.filter(p => p.id !== updatedPerson.id))\n                             })\n            }\n        }\n        else{ //person not in array\n            personService.create(newPerson)\n                         .then( person => {\n                             setPersons(persons.concat(person))\n                             setNotifyMessage(`Added ${newPerson.name}`)\n                                setTimeout(() => {\n                                    setNotifyMessage(null)\n                                }, 5000)\n                         })\n                         .catch(error => {\n                             console.log(error.response.data);\n                             setErrorMessage(error.response.data)\n                         })\n                         \n        }\n        \n        setNewPerson({name: '', number: ''})\n    }\n\n    const handlePersonChange = (event) => {\n        setNewPerson({\n            ...newPerson,\n            name: event.target.value\n        })\n    }\n\n    const handleNumberChange = (event) => {\n        setNewPerson({\n            ...newPerson,\n            number: event.target.value\n        })\n    }\n\n\n    const handleSearch = (event) => {\n        let search = event.target.value\n        setNewSearchWord(search)\n        //put search result in searchPersons array\n        setSearchPersons(persons.filter(\n            (person) => person['name'].toLowerCase().includes(search.toLowerCase())  \n        ))        \n    }\n\n    const handleDelete = (person) => {\n        //use window.confirm\n        if(window.confirm(`Delete ${person.name}?`)){\n            console.log('deleting id: ', person.id);\n            personService.deletePerson(person.id)\n                         .then(() => {\n                            console.log('deleted ', person.name)\n                            setPersons(persons.filter(p => p.id !== person.id))\n                         })\n                         .catch(error => {\n                            setErrorMessage(`Information of ${person.name} has already been removed from server`)\n                            setTimeout(() => {\n                                setErrorMessage(null)\n                            }, 5000)\n                            setPersons(persons.filter(p => p.id !== person.id))\n                         })\n                         \n        }\n    }\n\n    return(\n        <div>\n            <h2>Phonebook</h2>\n            <Notification message={notifyMessage}/>\n            <ErrorMessage message={errorMessage}/>\n            <Search value={searchWord} onChange={handleSearch} />\n    \n            <h2>add a new</h2>\n            <Form onSubmit={addPerson} name_value={newPerson['name']} name_onChange={handlePersonChange} \n                number_value={newPerson['number']} number_onChange={handleNumberChange}\n            />\n    \n            <h2>Numbers</h2>\n            <ShowPeople searchWord={searchWord} persons={persons} searchPersons={searchPersons} onButtonClick={handleDelete}/>\n        </div>\n    )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App'\n\nReactDOM.render(\n  <App />, document.getElementById('root')\n);\n"],"sourceRoot":""}